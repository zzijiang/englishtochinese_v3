<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary Challenge</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Vocabulary Challenge</h1>
        <h2>ç¬¬ {{ question_number }} é¢˜</h2>
        <p class="word">{{ question.english }}</p>

        <form id="quiz-form" action="{{ url_for('next_question') }}" method="post">
            <div class="options">
                {% for option in question.options %}
                    <button type="button" class="option-btn" onclick="submitAnswer(this)" data-answer="{{ option }}">
                        {{ option }}
                    </button>
                {% endfor %}
            </div>
            <p id="feedback" class="hidden"></p>  <!-- è¿™é‡Œç”¨äºæ˜¾ç¤ºæ­£ç¡®æˆ–é”™è¯¯åé¦ˆ -->
            <input type="hidden" name="answer" id="selected-answer">
        </form>
    </div>

    <script>
        function submitAnswer(button) {
            // è·å–ç”¨æˆ·é€‰æ‹©çš„ç­”æ¡ˆ
            let userAnswer = button.getAttribute("data-answer");
            document.getElementById("selected-answer").value = userAnswer;

            // è·å–æ­£ç¡®ç­”æ¡ˆï¼ˆä» Flask ä¼ é€’è¿‡æ¥ï¼‰
            let correctAnswer = "{{ question.correct_answer }}";
            
            // åé¦ˆæ–‡æœ¬
            let feedback = document.getElementById("feedback");
            if (userAnswer === correctAnswer) {
                feedback.innerText = "âœ… æ­£ç¡®ï¼ğŸ‰";
                feedback.style.color = "green";
            } else {
                feedback.innerHTML = `âŒ é”™è¯¯ï¼<span class="black-text"> æ­£ç¡®ç­”æ¡ˆï¼š</span> <span class="green-text">${correctAnswer}</span>`;
            }

            // æ˜¾ç¤ºåé¦ˆä¿¡æ¯
            feedback.classList.remove("hidden");

            // 1.5 ç§’åè‡ªåŠ¨æäº¤è¡¨å•
            setTimeout(() => {
                document.getElementById("quiz-form").submit();
            }, 1500);
        }
    </script>
</body>
</html>
